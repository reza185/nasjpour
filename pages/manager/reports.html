<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2c3e50">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="TPM">
    <title>TMP</title>
    <link rel="icon" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="../../manifest.json">
    <link rel="apple-touch-icon" href="../../icons/icon-192x192.png">
    <link rel="apple-touch-startup-image" href="../../icons/icon-512x512.png">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- <script src="../../auth.js"></script> -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Vazirmatn', sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-text-size-adjust: 100%;
            touch-action: manipulation;
            * {
    -webkit-tap-highlight-color: transparent;  /* Ø¯Ø§Ø´Øª */
    -webkit-text-size-adjust: 100%;           /* Ø¯Ø§Ø´Øª */  
    touch-action: manipulation;               /* Ø¯Ø§Ø´Øª */
}
        }

        :root {
            --primary: #2c3e50;
            --primary-light: #34495e;
            --accent: #e74c3c;
            --accent-light: #ff6b6b;
            --secondary: #3498db;
            --dark: #1a252f;
            --light: #ecf0f1;
            --gray: #95a5a6;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
        }

        body {
            background: #f8f9fa;
            color: var(--dark);
            min-height: 100vh;
            overflow-x: hidden;
            width: 100%;
            -webkit-overflow-scrolling: touch;
            padding-top: env(safe-area-inset-top, 0px);
            padding-bottom: env(safe-area-inset-bottom, 0px);
        }

        /* Ù†ÙˆÛŒÚ¯ÛŒØ´Ù† */
        .navbar {
            background: var(--primary);
            color: white;
            padding: 0 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            width: 100%;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            background: transparent;
            width: 35px;
            height: 35px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .logo-text {
            font-size: 16px;
            font-weight: 700;
        }

        .nav-links {
            display: flex;
            gap: 15px;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 6px;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
            font-size: 14px;
        }

        .nav-link.active {
            background: rgba(255,255,255,0.15);
        }

        .nav-link:hover {
            background: rgba(255,255,255,0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-details {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 2px;
        }

        .user-name {
            font-weight: 600;
            font-size: 14px;
        }

        .login-time {
            font-size: 11px;
            opacity: 0.8;
            color: #ecf0f1;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px;
            width: 100%;
        }

        .header-card {
            background: var(--secondary);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            width: 100%;
        }

        .page-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 6px;
        }

        .page-subtitle {
            opacity: 0.9;
            font-size: 14px;
        }

        .login-info {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .login-info i {
            font-size: 11px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 1px solid #eaeaea;
            width: 100%;
            margin-bottom: 50px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-title i {
            color: var(--accent);
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 20px;
            width: 100%;
        }

        .summary-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid #eaeaea;
            transition: transform 0.3s ease;
        }

        .summary-item:hover {
            transform: translateY(-2px);
        }

        .summary-number {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 6px;
            color: var(--secondary);
        }

        .summary-label {
            color: var(--gray);
            font-size: 12px;
        }

        .report-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .report-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #eaeaea;
            transition: transform 0.2s;
        }

        .report-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .report-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }

        .report-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
            background: var(--secondary);
            flex-shrink: 0;
        }

        .report-content {
            flex: 1;
        }

        .report-title {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .report-desc {
            color: var(--gray);
            font-size: 12px;
        }

        .download-btn {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 12px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            touch-action: manipulation;
            flex-shrink: 0;
        }

        .download-btn:hover {
            background: var(--accent-light);
        }

        .table-container {
            overflow-x: auto;
            border-radius: 10px;
            border: 1px solid #eaeaea;
            width: 100%;
            -webkit-overflow-scrolling: touch;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            min-width: 500px;
        }

        .data-table th {
            background: #f8f9fa;
            padding: 12px 10px;
            text-align: right;
            font-weight: 600;
            color: var(--primary);
            border-bottom: 1px solid #eaeaea;
            font-size: 14px;
        }

        .data-table td {
            padding: 10px 8px;
            border-bottom: 1px solid #eaeaea;
            font-size: 14px;
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .negative {
            color: var(--danger);
            font-weight: 600;
        }

        .cleanup-alert {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
            animation: pulse 2s infinite;
        }

        .cleanup-alert-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .cleanup-alert-text {
            flex: 1;
        }

        .cleanup-alert-title {
            font-weight: 700;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .cleanup-alert-desc {
            opacity: 0.9;
            font-size: 12px;
        }

        .cleanup-alert-actions {
            display: flex;
            gap: 8px;
        }

        .alert-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
            touch-action: manipulation;
        }

        .alert-btn-primary {
            background: white;
            color: #e74c3c;
        }

        .alert-btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .filter-row {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: white;
            font-size: 13px;
            cursor: pointer;
            min-width: 120px;
            touch-action: manipulation;
        }

        .search-bar {
            flex: 1;
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 13px;
            background: white;
            min-width: 150px;
            touch-action: manipulation;
        }

        .bg-success { background: var(--success); }
        .bg-warning { background: var(--warning); }
        .bg-danger { background: var(--danger); }
        .bg-info { background: var(--secondary); }
        .bg-primary { background: var(--primary); }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        /* Ø±Ø³Ù¾Ø§Ù†Ø³ÛŒÙˆ */
        @media (max-width: 1024px) {
            .summary-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .summary-grid {
                grid-template-columns: 1fr;
            }
            
            .report-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .nav-links {
                gap: 8px;
            }
            
            .nav-link span {
                display: none;
            }
            
            .user-details {
                display: none;
            }

            .cleanup-alert-content {
                flex-direction: column;
                gap: 12px;
                text-align: center;
            }

            .filter-row {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .navbar {
                padding: 0 10px;
            }
            
            .nav-container {
                height: 50px;
            }
            
            .logo-icon {
                width: 30px;
                height: 30px;
                font-size: 14px;
            }
            
            .user-avatar {
                width: 35px;
                height: 35px;
                font-size: 12px;
            }
            
            .container {
                padding: 15px 10px;
            }
            
            .header-card {
                padding: 15px;
            }
            
            .page-title {
                font-size: 18px;
            }
            
            .card {
                padding: 15px;
            }
            
            .section-title {
                font-size: 16px;
            }
            
            .summary-number {
                font-size: 18px;
            }
            
            .report-icon {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }
        }

        /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø²ÙˆÙ… */
        @media (hover: none) and (pointer: coarse) {
            * {
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
            
            input, textarea, select {
                -webkit-user-select: text;
                -moz-user-select: text;
                -ms-user-select: text;
                user-select: text;
            }
        }

        button, .btn {
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }

        @media (max-width: 768px) {
            button:active, .btn:active {
                transform: scale(0.98);
                opacity: 0.9;
            }
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± iOS */
        input, select, textarea {
            font-size: 16px !important;
            transform: translateZ(0);
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ select Ø¯Ø± iOS */
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: left 12px center;
            background-size: 16px;
            padding-left: 40px;
        }

        /* Ø­Ø¯Ø§Ù‚Ù„ Ø³Ø§ÛŒØ² Ù„Ù…Ø³ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙ…Ø§Ù… Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø¯Ø± iOS */
        button, .btn, .nav-link, .alert-btn, .download-btn {
            min-height: 44px !important;
            min-width: 44px !important;
            cursor: pointer;
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¯Ø± iOS */
        .table-container, .container {
            -webkit-overflow-scrolling: touch !important;
            overflow-x: auto;
        }

        /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² highlight Ø¢Ø¨ÛŒ Ø¯Ø± iOS */
        * {
            -webkit-tap-highlight-color: transparent !important;
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ tables Ø¯Ø± iOS */
        .data-table {
            -webkit-overflow-scrolling: touch;
        }

        /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² bounce Ø¨ÛŒØ´ Ø§Ø² Ø­Ø¯ Ø¯Ø± iOS */
        body {
            overscroll-behavior-y: none;
            -webkit-overflow-scrolling: touch;
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ inputÙ‡Ø§ÛŒ Ø¹Ø¯Ø¯ÛŒ Ø¯Ø± iOS */
        input[type="number"] {
            -webkit-appearance: none;
            -moz-appearance: textfield;
        }

        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ ÙØ±Ù…â€ŒÙ‡Ø§ Ø¯Ø± iOS */
        .search-bar, .filter-select {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
            touch-action: manipulation;
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ navigation Ø¯Ø± iOS */
        .navbar {
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ Ø¯Ø± iOS */
        .report-list, .summary-grid {
            -webkit-overflow-scrolling: touch;
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¯Ø± iOS */
        .card, .summary-item {
            -webkit-tap-highlight-color: transparent;
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ Ø¯Ø± iOS */
        i, .fas, .far, .fab {
            -webkit-tap-highlight-color: transparent;
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ Ø¯Ø± iOS */
        a {
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§ Ø¯Ø± iOS */
        .negative {
            -webkit-tap-highlight-color: transparent;
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø± iOS */
        .download-btn:active {
            transform: scale(0.98);
            opacity: 0.9;
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ navigation links Ø¯Ø± iOS */
        .nav-link:active {
            background: rgba(255,255,255,0.2) !important;
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ action items Ø¯Ø± iOS */
        .report-item:active {
            transform: translateY(-2px) scale(0.98);
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ metric cards Ø¯Ø± iOS */
        .summary-item:active {
            transform: translateY(-2px) scale(0.98);
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø³ÛŒØ§Ø± Ú©ÙˆÚ†Ú© */
        @media (max-width: 360px) {
            .navbar {
                padding: 0 8px;
            }
            
            .nav-container {
                height: 48px;
            }
            
            .logo-icon {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }
            
            .logo-text {
                font-size: 12px;
            }
            
            .user-avatar {
                width: 32px;
                height: 32px;
                font-size: 11px;
            }
            
            .container {
                padding: 10px 8px;
            }
            
            .header-card {
                padding: 12px;
            }
            
            .page-title {
                font-size: 16px;
            }
            
            .page-subtitle {
                font-size: 12px;
            }
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± Ø­Ø§Ù„Øª landscape */
        @media (max-height: 500px) and (orientation: landscape) {
            .navbar {
                height: 48px;
            }
            
            .nav-container {
                height: 48px;
            }
            
            .container {
                padding: 10px 15px;
            }
            
            .header-card {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .card {
                padding: 15px;
                margin-bottom: 15px;
            }
        }

        /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± Ø­Ø§Ù„Øª PWA (Ù†ØµØ¨ Ø´Ø¯Ù‡) */
        @media all and (display-mode: standalone) {
            body {
                height: 100vh;
                height: -webkit-fill-available;
                height: fill-available;
            }
            
            .navbar {
                padding-top: env(safe-area-inset-top);
            }
            
            .container {
                padding-bottom: env(safe-area-inset-bottom);
            }
        }
    </style>
</head>
<body>
    <!-- Ù†ÙˆÛŒÚ¯ÛŒØ´Ù† -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">
                    <img src="../../Logo.png" style="max-block-size:100% ;" >
                </div>
                <div class="logo-text">TPM PRO</div>
            </div>
            
            <div class="nav-links">
                <a href="dashboard.html" class="nav-link">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</span>
                </a>
                <a href="reports.html" class="nav-link active">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Ú¯Ø²Ø§Ø±Ø´Ø§Øª</span>
                </a>
                <a href="work-order.html" class="nav-link">
                    <i class="fas fa-tools"></i>
                    <span>Ø¯Ø³ØªÙˆØ±Ú©Ø§Ø±</span>
                </a>
            </div>
            
            <div class="user-info">
                <div class="user-details">
                    <div class="user-name" id="userName">Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…</div>
                    <div class="login-time" id="loginTime">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
                </div>
                <div class="user-avatar" id="userAvatar">M</div>
            </div>
        </div>
    </nav>

    <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ -->
    <div class="container">
        <!-- Ù‡Ø´Ø¯Ø§Ø± Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ -->
        <div class="cleanup-alert" id="cleanupAlert">
            <div class="cleanup-alert-content">
                <div class="cleanup-alert-text">
                    <div class="cleanup-alert-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Ù‡Ø´Ø¯Ø§Ø± Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
                    </div>
                    <div class="cleanup-alert-desc" id="cleanupMessage">
                        Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÙˆÙ„ Ù…Ø¯ÛŒØ±ÛŒØª ØªØ§ 1 Ø±ÙˆØ² Ø¯ÛŒÚ¯Ø± Ù¾Ø§Ú© Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ø§Ø² Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ú©Ø§Ù¾ Ø¨Ú¯ÛŒØ±ÛŒØ¯.
                    </div>
                </div>
                <div class="cleanup-alert-actions">
                    <button class="alert-btn alert-btn-secondary" onclick="dismissAlert()">
                        Ø¨Ø¹Ø¯Ø§Ù‹ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ú©Ù†
                    </button>
                    <button class="alert-btn alert-btn-primary" onclick="downloadAllData()">
                        <i class="fas fa-download"></i>
                        Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
                    </button>
                </div>
            </div>
        </div>

        <!-- Ù‡Ø¯Ø± ØµÙØ­Ù‡ -->
        <div class="header-card">
            <h1 class="page-title">Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ù…Ø¯ÛŒØ±ÛŒØªÛŒ</h1>
            <p class="page-subtitle">Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ© Ø¨Ø±Ø§ÛŒ ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª</p>
            <div class="login-info">
                <i class="fas fa-clock"></i>
                Ø¢Ø®Ø±ÛŒÙ† ÙˆØ±ÙˆØ¯: <span id="lastLoginTime">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</span>
            </div>
        </div>

        <!-- Ø®Ù„Ø§ØµÙ‡ Ø§Ø¬Ø±Ø§ÛŒÛŒ -->
        <div class="card">
            <h2 class="section-title">
                <i class="fas fa-chart-pie"></i>
                Ø®Ù„Ø§ØµÙ‡ Ø§Ø¬Ø±Ø§ÛŒÛŒ
            </h2>
            
            <div class="summary-grid">
                <div class="summary-item">
                    <div class="summary-number" id="totalReports">0</div>
                    <div class="summary-label">Ú©Ù„ Ú¯Ø²Ø§Ø±Ø´Ø§Øª</div>
                </div>
                
                <div class="summary-item">
                    <div class="summary-number" id="pendingReports">0</div>
                    <div class="summary-label">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ</div>
                </div>
                
                <div class="summary-item">
                    <div class="summary-number" id="completedReports">0</div>
                    <div class="summary-label">ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</div>
                </div>
                
                <div class="summary-item">
                    <div class="summary-number" id="referredReports">0</div>
                    <div class="summary-label">Ø§Ø±Ø¬Ø§Ø¹ Ø¨Ù‡ Ù…Ø¯ÛŒØ±</div>
                </div>
            </div>
        </div>

        <!-- ÙÛŒÙ„ØªØ± Ùˆ Ø¬Ø³ØªØ¬Ùˆ -->
        <div class="card">
            <h2 class="section-title">
                <i class="fas fa-filter"></i>
                ÙÛŒÙ„ØªØ± Ùˆ Ø¬Ø³ØªØ¬Ùˆ
            </h2>
            
            <div class="filter-row">
                <input type="text" class="search-bar" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ú¯Ø²Ø§Ø±Ø´Ø§Øª..." id="searchInput">
                
                <select class="filter-select" id="statusFilter">
                    <option value="all">Ù‡Ù…Ù‡ ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§</option>
                    <option value="pending">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ</option>
                    <option value="approved">ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡</option>
                    <option value="rejected">Ø±Ø¯ Ø´Ø¯Ù‡</option>
                    <option value="in-progress">Ø¯Ø± Ø¯Ø³Øª Ø§Ù‚Ø¯Ø§Ù…</option>
                    <option value="completed">ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</option>
                    <option value="referred_to_manager">Ø§Ø±Ø¬Ø§Ø¹ Ø¨Ù‡ Ù…Ø¯ÛŒØ±</option>
                </select>
                
                <select class="filter-select" id="priorityFilter">
                    <option value="all">Ù‡Ù…Ù‡ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒÙ‡Ø§</option>
                    <option value="low">Ú©Ù…</option>
                    <option value="medium">Ù…ØªÙˆØ³Ø·</option>
                    <option value="high">Ø¨Ø§Ù„Ø§</option>
                    <option value="critical">Ø¨Ø­Ø±Ø§Ù†ÛŒ</option>
                </select>

                <button class="download-btn" onclick="downloadFilteredData()">
                    <i class="fas fa-download"></i>
                    Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙÛŒÙ„ØªØ± Ø´Ø¯Ù‡
                </button>
            </div>
        </div>

        <!-- Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ù…Ø¯ÛŒØ±ÛŒØªÛŒ -->
        <div class="card">
            <h2 class="section-title">
                <i class="fas fa-file-alt"></i>
                Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ù…Ø¯ÛŒØ±ÛŒØªÛŒ
                <span style="font-size: 12px; color: var(--gray); margin-right: auto;" id="reportsCount">
                    (0 Ú¯Ø²Ø§Ø±Ø´)
                </span>
            </h2>
            
            <div class="report-list" id="reportsList">
                  <!-- Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ -->
        <div class="card">
            <h2 class="section-title">
                <i class="fas fa-chart-bar"></i>
                
            </h2>
            
            <div class="table-container">
                <table class="data-table">
                   <thead>
                        <tr>
                            <th>Ù…Ø¹ÛŒØ§Ø±</th>
                            <th>Ù…Ù‚Ø¯Ø§Ø± ÙØ¹Ù„ÛŒ</th>
                            <th>Ù‡Ø¯Ù</th>
                            <th>Ø§Ù†Ø­Ø±Ø§Ù</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ (Ø³Ø§Ø¹Øª)</td>
                            <td id="avgResponseTime">-</td>
                            <td>4</td>
                            <td class="negative" id="responseDeviation">-</td>
                        </tr>
                        <tr>
                            <td>Ù†Ø±Ø® ØªÚ©Ù…ÛŒÙ„ Ù…ÙˆÙÙ‚</td>
                            <td id="completionRate">-</td>
                            <td>95%</td>
                            <td class="negative" id="completionDeviation">-</td>
                        </tr>
                        <tr>
                            <td>Ù‡Ø²ÛŒÙ†Ù‡ Ù…ØªÙˆØ³Ø· ØªØ¹Ù…ÛŒØ±Ø§Øª</td>
                            <td id="avgRepairCost">-</td>
                            <td>$1,100</td>
                            <td class="negative" id="costDeviation">-</td>
                        </tr>
                    </tbody> 
                </table>
            </div>
        </div>
    </div>
            </div>
        </div>

      
        <div id="offlineAlert" style="display: none; position: fixed; top: 0; left: 0; right: 0; background: #e74c3c; color: white; text-align: center; padding: 10px; z-index: 10003; font-family: Vazirmatn;">
            <i class="fas fa-wifi-slash"></i> Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ† - Ø§ØªØµØ§Ù„ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø¨Ø±Ù‚Ø±Ø§Ø± Ù†ÛŒØ³Øª
        </div>
    <script>
       delete window.alert;

window.alert = function(message) {
    return new Promise((resolve) => {
        const overlay = document.createElement('div');
        overlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        `;
        
        const dialog = document.createElement('div');
        dialog.style.cssText = `
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            text-align: center;
            min-width: 300px;
            max-width: 90%;
            font-family: Vazirmatn, sans-serif;
            border: 2px solid #2c3e50;
        `;
        
        dialog.innerHTML = `
            <div style="margin-bottom: 20px; font-size: 16px; color: #2c3e50; line-height: 1.5;">${message}</div>
            <button onclick="closeCustomAlert()" 
                    style="padding: 10px 25px; background: #2c3e50; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px;">
                ØªØ£ÛŒÛŒØ¯
            </button>
        `;
        
        overlay.appendChild(dialog);
        document.body.appendChild(overlay);
        
        window.closeCustomAlert = function() {
            if (document.body.contains(overlay)) {
                document.body.removeChild(overlay);
            }
            resolve();
        };
    });
};

// ==================== ORIGINAL CODE ====================
document.addEventListener('DOMContentLoaded', function() {
    
    // ==================== ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ ====================
    function formatPersianDateTime(date) {
        const options = {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
        };
        return new Intl.DateTimeFormat('fa-IR', options).format(date);
    }

    function getTimeSinceLogin(loginTime) {
        const now = new Date();
        const diff = now - loginTime;
        const minutes = Math.floor(diff / 60000);
        const hours = Math.floor(minutes / 60);
        
        if (hours > 0) {
            return `${hours} Ø³Ø§Ø¹Øª Ùˆ ${minutes % 60} Ø¯Ù‚ÛŒÙ‚Ù‡ Ù‚Ø¨Ù„`;
        } else {
            return `${minutes} Ø¯Ù‚ÛŒÙ‚Ù‡ Ù‚Ø¨Ù„`;
        }
    }

    function updateOnlineTime() {
        const loginTimeElement = document.getElementById('loginTime');
        if (loginTimeElement && window.loginTime) {
            loginTimeElement.textContent = getTimeSinceLogin(window.loginTime);
        }
    }

    // ==================== Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø²ÙˆÙ… Ø¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„ ====================
    document.addEventListener('touchstart', function(e) {
        if (e.touches.length > 1) {
            e.preventDefault();
        }
    }, { passive: false });

    let lastTouchEnd = 0;
    document.addEventListener('touchend', function(e) {
        const now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
            e.preventDefault();
        }
        lastTouchEnd = now;
    }, false);

    document.addEventListener('gesturestart', function(e) {
        e.preventDefault();
    });

    document.addEventListener('gesturechange', function(e) {
        e.preventDefault();
    });

    document.addEventListener('gestureend', function(e) {
        e.preventDefault();
    });

    // ==================== Ù…Ø¯ÛŒØ±ÛŒØª Ø²Ù…Ø§Ù† ÙˆØ±ÙˆØ¯ ====================
    const now = new Date();
    window.loginTime = now;
    
    const loginTimeElement = document.getElementById('loginTime');
    const lastLoginTimeElement = document.getElementById('lastLoginTime');
    const userNameElement = document.getElementById('userName');
    const userAvatarElement = document.getElementById('userAvatar');
    
    if (loginTimeElement) {
        loginTimeElement.textContent = formatPersianDateTime(now);
    }
    
    if (lastLoginTimeElement) {
        lastLoginTimeElement.textContent = formatPersianDateTime(now);
    }

    setInterval(updateOnlineTime, 60000);

    // ==================== Ø§ØªØµØ§Ù„ Ø¨Ù‡ Supabase ====================
    const SUPABASE_URL = 'https://kalykylvjqigqlaprlca.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImthbHlreWx2anFpZ3FsYXBybGNhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1NjI1OTcsImV4cCI6MjA3OTEzODU5N30.S8YtogVrxkqYjkgfkGpy4_mS6mqaNxmsHjxnhyBPwEY';
    
    console.log('ğŸ”— Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Supabase...');
    
    // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ supabase
    if (typeof window.supabase === 'undefined') {
        console.error('âŒ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Supabase ÛŒØ§ÙØª Ù†Ø´Ø¯!');
        alert('Ø®Ø·Ø§: Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Supabase Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª');
        return;
    }
    
    try {
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        console.log('âœ… Supabase Ù…ØªØµÙ„ Ø´Ø¯');
        
        // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± window Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ
        window.supabaseClient = supabase;
        
    } catch (error) {
        console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Supabase:', error);
        alert('Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡');
        return;
    }

    let allReports = [];
    let filteredReports = [];

    // ==================== ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ ====================
    function getStatusText(status) {
        const statusMap = {
            'pending': 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ',
            'approved': 'ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡',
            'rejected': 'Ø±Ø¯ Ø´Ø¯Ù‡',
            'in-progress': 'Ø¯Ø± Ø¯Ø³Øª Ø§Ù‚Ø¯Ø§Ù…',
            'completed': 'ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡',
            'referred_to_manager': 'Ø§Ø±Ø¬Ø§Ø¹ Ø¨Ù‡ Ù…Ø¯ÛŒØ±'
        };
        return statusMap[status] || status;
    }

    function getPriorityText(priority) {
        const priorityMap = {
            'low': 'Ú©Ù…',
            'medium': 'Ù…ØªÙˆØ³Ø·',
            'high': 'Ø¨Ø§Ù„Ø§',
            'critical': 'Ø¨Ø­Ø±Ø§Ù†ÛŒ'
        };
        return priorityMap[priority] || priority;
    }

    function getPriorityColor(priority) {
        const colorMap = {
            'low': '#2ecc71',
            'medium': '#f39c12', 
            'high': '#e74c3c',
            'critical': '#c0392b'
        };
        return colorMap[priority] || '#3498db';
    }

    // ==================== Ù„ÙˆØ¯ Ú¯Ø²Ø§Ø±Ø´Ø§Øª ====================
    async function loadManagerReports() {
        console.log('ğŸ“¥ Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ø§Ø² Supabase...');
        
        try {
            // Ø¨Ø±Ø±Ø³ÛŒ Ø§ØªØµØ§Ù„
            if (!window.supabaseClient) {
                console.error('âŒ Supabase Ù…ØªØµÙ„ Ù†ÛŒØ³Øª');
                await alert('Ø®Ø·Ø§: Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ Ø¨Ø±Ù‚Ø±Ø§Ø± Ù†ÛŒØ³Øª');
                return;
            }
            
            // Ù†Ù…Ø§ÛŒØ´ loader
            const loader = document.getElementById('loader');
            if (loader) loader.style.display = 'block';
            
            // Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ Supabase
            const { data: reports, error } = await window.supabaseClient
                .from('managerreports')
                .select('*')
                .order('created_at', { ascending: false });

            console.log('ğŸ“Š Ù¾Ø§Ø³Ø® Supabase:', { reports, error });

            if (error) {
                console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§:', error);
                
                // Ø¨Ø±Ø±Ø³ÛŒ Ù†ÙˆØ¹ Ø®Ø·Ø§
                if (error.code === 'PGRST204') {
                    console.log('âš ï¸ Ø¬Ø¯ÙˆÙ„ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª');
                    allReports = [];
                } else if (error.message.includes('JWT')) {
                    await alert('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª. Ù„Ø·ÙØ§Ù‹ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯.');
                } else {
                    await alert(`Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ú¯Ø²Ø§Ø±Ø´Ø§Øª: ${error.message}`);
                }
                
            } else {
                console.log(`âœ… ${reports ? reports.length : 0} Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯`);
                allReports = reports || [];
            }

            filteredReports = [...allReports];
            
            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† loader
            if (loader) loader.style.display = 'none';
            
            // Ø¢Ù¾Ø¯ÛŒØª UI
            updateStats();
            renderReports();
            checkCleanupAlert();
            
        } catch (error) {
            console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ù…Ø¯ÛŒØ±ÛŒØªÛŒ:', error);
            
            const loader = document.getElementById('loader');
            if (loader) loader.style.display = 'none';
            
            await alert('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ø§Ø² Ø³Ø±ÙˆØ±');
            
            // Ù†Ù…Ø§ÛŒØ´ Ø­Ø§Ù„Øª Ø¨Ø¯ÙˆÙ† Ø¯Ø§Ø¯Ù‡
            allReports = [];
            filteredReports = [];
            updateStats();
            renderReports();
        }
    }

    // ==================== Ø¢Ù¾Ø¯ÛŒØª Ø¢Ù…Ø§Ø± ====================
    function updateStats() {
        console.log('ğŸ“Š Ø¢Ù¾Ø¯ÛŒØª Ø¢Ù…Ø§Ø±...');
        
        const totalReports = allReports.length;
        const pendingReports = allReports.filter(r => 
            !r.status || r.status === 'pending' || r.status === 'in-progress'
        ).length;
        const completedReports = allReports.filter(r => r.status === 'completed').length;
        const referredReports = allReports.filter(r => r.status === 'referred_to_manager').length;

        const totalReportsEl = document.getElementById('totalReports');
        const pendingReportsEl = document.getElementById('pendingReports');
        const completedReportsEl = document.getElementById('completedReports');
        const referredReportsEl = document.getElementById('referredReports');
        const reportsCountEl = document.getElementById('reportsCount');

        if (totalReportsEl) totalReportsEl.textContent = totalReports;
        if (pendingReportsEl) pendingReportsEl.textContent = pendingReports;
        if (completedReportsEl) completedReportsEl.textContent = completedReports;
        if (referredReportsEl) referredReportsEl.textContent = referredReports;
        if (reportsCountEl) reportsCountEl.textContent = `(${filteredReports.length} Ú¯Ø²Ø§Ø±Ø´)`;

        updatePerformanceMetrics();
    }

    function updatePerformanceMetrics() {
        const completedReports = allReports.filter(r => r.status === 'completed');
        
        if (completedReports.length > 0) {
            const totalResponseTime = completedReports.reduce((sum, report) => {
                const createdAt = new Date(report.created_at);
                const completedAt = new Date(report.completed_at || report.updated_at || report.created_at);
                const diffHours = (completedAt - createdAt) / (1000 * 60 * 60);
                return sum + (isNaN(diffHours) ? 0 : diffHours);
            }, 0);
            
            const avgResponseTime = (totalResponseTime / completedReports.length).toFixed(1);
            const avgResponseTimeEl = document.getElementById('avgResponseTime');
            const responseDeviationEl = document.getElementById('responseDeviation');
            
            if (avgResponseTimeEl) avgResponseTimeEl.textContent = `${avgResponseTime} Ø³Ø§Ø¹Øª`;
            if (responseDeviationEl) responseDeviationEl.textContent = `${(avgResponseTime - 4).toFixed(1)} Ø³Ø§Ø¹Øª`;

            const successfulCompletions = completedReports.filter(r => 
                !r.decision_status || r.decision_status === 'approved'
            ).length;
            const completionRate = ((successfulCompletions / completedReports.length) * 100).toFixed(1);
            const completionRateEl = document.getElementById('completionRate');
            const completionDeviationEl = document.getElementById('completionDeviation');
            
            if (completionRateEl) completionRateEl.textContent = `${completionRate}%`;
            if (completionDeviationEl) completionDeviationEl.textContent = `${(completionRate - 95).toFixed(1)}%`;
        }
    }

    // ==================== Ù†Ù…Ø§ÛŒØ´ Ú¯Ø²Ø§Ø±Ø´Ø§Øª ====================
    function renderReports() {
        console.log('ğŸ–¥ï¸ Ù†Ù…Ø§ÛŒØ´ Ú¯Ø²Ø§Ø±Ø´Ø§Øª...');
        
        const reportsList = document.getElementById('reportsList');
        if (!reportsList) {
            console.error('âŒ Ø§Ù„Ù…Ù†Øª reportsList ÛŒØ§ÙØª Ù†Ø´Ø¯');
            return;
        }
        
        if (!filteredReports || filteredReports.length === 0) {
            console.log('â„¹ï¸ Ù‡ÛŒÚ† Ú¯Ø²Ø§Ø±Ø´ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯');
            reportsList.innerHTML = `
                <div style="text-align: center; padding: 40px; color: #666;">
                    <i class="fas fa-inbox" style="font-size: 48px; margin-bottom: 16px; color: #ddd;"></i>
                    <h3>Ú¯Ø²Ø§Ø±Ø´ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</h3>
                    <p>Ù‡ÛŒÚ† Ú¯Ø²Ø§Ø±Ø´ÛŒ Ø¨Ø§ ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ù…Ø·Ø§Ø¨Ù‚Øª Ù†Ø¯Ø§Ø±Ø¯.</p>
                    <button onclick="loadManagerReports()" 
                            style="margin-top: 20px; padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-sync-alt"></i> Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
                    </button>
                </div>
            `;
            return;
        }

        console.log(`ğŸ“‹ Ù†Ù…Ø§ÛŒØ´ ${filteredReports.length} Ú¯Ø²Ø§Ø±Ø´`);

        reportsList.innerHTML = filteredReports.map(report => {
            const status = report.status || 'pending';
            const priority = report.priority || 'medium';
            const priorityColor = getPriorityColor(priority);
            
            // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ
            const machineName = report.machine_name || 'Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†';
            const problemDesc = report.problem_description || 'Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­Ø§Øª';
            const reporterName = report.reporter_name || report.technician_name || 'Ù†Ø§Ù…Ø´Ø®Øµ';
            const createdDate = report.created_at ? new Date(report.created_at).toLocaleDateString('fa-IR') : 'Ù†Ø§Ù…Ø´Ø®Øµ';
            
            return `
            <div class="report-item">
                <div class="report-info">
                    <div class="report-icon" style="background: ${priorityColor}">
                        <i class="fas fa-clipboard-check"></i>
                    </div>
                    <div class="report-content">
                        <div class="report-title">${machineName}</div>
                        <div class="report-desc">${problemDesc}</div>
                        <div style="display: flex; gap: 10px; margin-top: 6px; font-size: 11px; color: #666; flex-wrap: wrap;">
                            <span><strong>Ú¯Ø²Ø§Ø±Ø´â€ŒØ¯Ù‡Ù†Ø¯Ù‡:</strong> ${reporterName}</span>
                            <span><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> ${getStatusText(status)}</span>
                            <span><strong>Ø§ÙˆÙ„ÙˆÛŒØª:</strong> ${getPriorityText(priority)}</span>
                            <span><strong>ØªØ§Ø±ÛŒØ®:</strong> ${createdDate}</span>
                        </div>
                        ${report.manager_message ? `
                            <div style="margin-top: 6px; padding: 6px; background: #fff3cd; border-radius: 4px; font-size: 11px;">
                                <strong>ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ù…Ø¯ÛŒØ±:</strong> ${report.manager_message}
                            </div>
                        ` : ''}
                        ${report.actions_taken && report.actions_taken.trim().length > 1 ? `
                            <div style="margin-top: 6px; padding: 6px; background: #fff3cd; border-radius: 4px; font-size: 11px;">
                                <strong>Ù‚Ø·Ø¹Ø§Øª Ù…ØµØ±ÙÛŒ:</strong> ${report.actions_taken} ${report.consumable_quantity || 0} Ø¹Ø¯Ø¯
                            </div>
                        ` : ''}
                    </div>
                </div>
                <div style="display: flex; gap: 8px;">
                    <button class="download-btn" onclick="downloadSingleReport('${report.id}')" title="Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø§ÛŒÙ† Ú¯Ø²Ø§Ø±Ø´">
                        <i class="fas fa-download"></i>
                        Ø¯Ø§Ù†Ù„ÙˆØ¯
                    </button>
                </div>
            </div>
            `;
        }).join('');
    }

    // ==================== ÙÛŒÙ„ØªØ± Ú¯Ø²Ø§Ø±Ø´Ø§Øª ====================
    function filterReports() {
        const searchInput = document.getElementById('searchInput');
        const statusFilter = document.getElementById('statusFilter');
        const priorityFilter = document.getElementById('priorityFilter');
        
        if (!searchInput || !statusFilter || !priorityFilter) {
            console.error('âŒ Ø§Ù„Ù…Ù†Øªâ€ŒÙ‡Ø§ÛŒ ÙÛŒÙ„ØªØ± ÛŒØ§ÙØª Ù†Ø´Ø¯Ù†Ø¯');
            return;
        }
        
        const searchTerm = searchInput.value.toLowerCase();
        const statusValue = statusFilter.value;
        const priorityValue = priorityFilter.value;

        console.log(`ğŸ” ÙÛŒÙ„ØªØ± Ú©Ø±Ø¯Ù†: Ø¬Ø³ØªØ¬Ùˆ="${searchTerm}", ÙˆØ¶Ø¹ÛŒØª="${statusValue}", Ø§ÙˆÙ„ÙˆÛŒØª="${priorityValue}"`);

        filteredReports = allReports.filter(report => {
            // Ø¬Ø³ØªØ¬Ùˆ
            const matchesSearch = 
                (report.machine_name && report.machine_name.toLowerCase().includes(searchTerm)) || 
                (report.problem_description && report.problem_description.toLowerCase().includes(searchTerm)) ||
                (report.reporter_name && report.reporter_name.toLowerCase().includes(searchTerm)) ||
                (report.technician_name && report.technician_name.toLowerCase().includes(searchTerm));
            
            // ÙˆØ¶Ø¹ÛŒØª
            const reportStatus = report.status || 'pending';
            const matchesStatus = statusValue === 'all' || reportStatus === statusValue;
            
            // Ø§ÙˆÙ„ÙˆÛŒØª
            const reportPriority = report.priority || 'medium';
            const matchesPriority = priorityValue === 'all' || reportPriority === priorityValue;
            
            return matchesSearch && matchesStatus && matchesPriority;
        });

        console.log(`âœ… ${filteredReports.length} Ú¯Ø²Ø§Ø±Ø´ Ù¾Ø³ Ø§Ø² ÙÛŒÙ„ØªØ± Ø´Ø¯Ù†`);
        renderReports();
        updateStats();
    }

    // ==================== Ù‡Ø´Ø¯Ø§Ø± Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ ====================
    function checkCleanupAlert() {
        const now = new Date();
        const nextMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);
        const daysUntilCleanup = Math.ceil((nextMonth - now) / (1000 * 60 * 60 * 24));
        
        if (daysUntilCleanup <= 3) {
            const alertElement = document.getElementById('cleanupAlert');
            const messageElement = document.getElementById('cleanupMessage');
            
            if (alertElement && messageElement) {
                messageElement.textContent = 
                    `Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÙˆÙ„ Ù…Ø¯ÛŒØ±ÛŒØª ØªØ§ ${daysUntilCleanup} Ø±ÙˆØ² Ø¯ÛŒÚ¯Ø± Ù¾Ø§Ú© Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ø§Ø² Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ú©Ø§Ù¾ Ø¨Ú¯ÛŒØ±ÛŒØ¯.`;
                
                alertElement.style.display = 'block';
            }
        }
    }

    function dismissAlert() {
        const alertElement = document.getElementById('cleanupAlert');
        if (alertElement) {
            alertElement.style.display = 'none';
        }
    }

    // ==================== Ø³ÛŒØ³ØªÙ… Ø¯Ø§Ù†Ù„ÙˆØ¯ ====================
    function showDownloadOptions(type, reportId = null) {
        console.log(`ğŸ“¥ Ù†Ù…Ø§ÛŒØ´ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯: Ù†ÙˆØ¹=${type}, Ú¯Ø²Ø§Ø±Ø´=${reportId}`);
        
        const modal = document.createElement('div');
        modal.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        `;
        
        modal.innerHTML = `
            <div style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 8px 25px rgba(0,0,0,0.3); text-align: center; min-width: 320px; max-width: 90%; font-family: Vazirmatn, sans-serif;">
                <h3 style="margin-bottom: 20px; color: #2c3e50;">Ø§Ù†ØªØ®Ø§Ø¨ ÙØ±Ù…Øª Ø¯Ø§Ù†Ù„ÙˆØ¯</h3>
                <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 20px; flex-wrap: wrap;">
                    <button onclick="downloadSelectedFormat('${type}', '${reportId}', 'csv')" 
                            style="padding: 12px 20px; background: #27ae60; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; min-width: 100px;">
                        <i class="fas fa-file-csv"></i> CSV
                    </button>
                    <button onclick="downloadSelectedFormat('${type}', '${reportId}', 'json')" 
                            style="padding: 12px 20px; background: #3498db; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; min-width: 100px;">
                        <i class="fas fa-file-code"></i> JSON
                    </button>
                </div>
                <button onclick="closeDownloadModal()" 
                        style="padding: 10px 20px; background: #95a5a6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px;">
                    Ø§Ù†ØµØ±Ø§Ù
                </button>
            </div>
        `;
        
        modal.id = 'downloadModal';
        document.body.appendChild(modal);
        
        window.closeDownloadModal = function() {
            const modal = document.getElementById('downloadModal');
            if (modal && document.body.contains(modal)) {
                document.body.removeChild(modal);
            }
        };
    }

    async function downloadSelectedFormat(type, reportId, format) {
        try {
            console.log(`â¬‡ï¸ Ø¯Ø§Ù†Ù„ÙˆØ¯ ${type} Ø¯Ø± ÙØ±Ù…Øª ${format}`);
            
            let data, filename;
            
            if (type === 'all') {
                data = allReports.map(report => convertToPersianFormat(report));
                filename = 'Ù‡Ù…Ù‡_Ú¯Ø²Ø§Ø±Ø´Ø§Øª_Ù…Ø¯ÛŒØ±ÛŒØªÛŒ';
            } else if (type === 'filtered') {
                data = filteredReports.map(report => convertToPersianFormat(report));
                filename = 'Ú¯Ø²Ø§Ø±Ø´Ø§Øª_ÙÛŒÙ„ØªØ±_Ø´Ø¯Ù‡';
            } else if (type === 'single') {
                const report = allReports.find(r => r.id === reportId);
                if (!report) {
                    throw new Error('Ú¯Ø²Ø§Ø±Ø´ ÛŒØ§ÙØª Ù†Ø´Ø¯');
                }
                data = [convertToPersianFormat(report)];
                filename = `Ú¯Ø²Ø§Ø±Ø´_${report.machine_name || report.id}`;
            } else {
                throw new Error('Ù†ÙˆØ¹ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù†Ø§Ù…Ø¹ØªØ¨Ø±');
            }
            
            await downloadData(data, filename, format);
            closeDownloadModal();
            
        } catch (error) {
            console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø§Ù†Ù„ÙˆØ¯:', error);
            await alert('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙØ§ÛŒÙ„');
        }
    }

    function convertToPersianFormat(report) {
        return {
            'Ù†Ø§Ù… Ø¯Ø³ØªÚ¯Ø§Ù‡': report.machine_name || 'Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†',
            'ØªÙˆØ¶ÛŒØ­ Ù…Ø´Ú©Ù„': report.problem_description || 'Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­Ø§Øª',
            'Ú¯Ø²Ø§Ø±Ø´â€ŒØ¯Ù‡Ù†Ø¯Ù‡': report.reporter_name || report.technician_name || 'Ù†Ø§Ù…Ø´Ø®Øµ',
            'ÙˆØ¶Ø¹ÛŒØª': getStatusText(report.status),
            'Ø§ÙˆÙ„ÙˆÛŒØª': getPriorityText(report.priority),
            'ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯': report.created_at ? new Date(report.created_at).toLocaleDateString('fa-IR') : 'Ù†Ø§Ù…Ø´Ø®Øµ',
            'ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ù…Ø¯ÛŒØ±': report.manager_message || '',
            'Ø´Ù†Ø§Ø³Ù‡': report.id || '',
            'ØªØ§Ø±ÛŒØ® Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ': report.updated_at ? new Date(report.updated_at).toLocaleDateString('fa-IR') : '',
            'ØªØ§Ø±ÛŒØ® ØªÚ©Ù…ÛŒÙ„': report.completed_at ? new Date(report.completed_at).toLocaleDateString('fa-IR') : '',
            'ØªØµÙ…ÛŒÙ… Ù…Ø¯ÛŒØ±': getDecisionText(report.decision_status),
            'Ù‚Ø·Ø¹Ø§Øª Ù…ØµØ±ÙÛŒ': report.actions_taken || '',
            'ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø·Ø¹Ø§Øª': report.consumable_quantity || 0
        };
    }

    function getDecisionText(decision) {
        const decisionMap = {
            'approved': 'ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡',
            'rejected': 'Ø±Ø¯ Ø´Ø¯Ù‡',
            'pending': 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±'
        };
        return decisionMap[decision] || decision || '';
    }

    async function downloadData(data, filename, format) {
        try {
            if (!data || data.length === 0) {
                await alert('Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯');
                return;
            }

            let fileContent, fileExtension, mimeType;

            if (format === 'csv') {
                fileContent = convertToCSV(data);
                fileExtension = 'csv';
                mimeType = 'text/csv;charset=utf-8;';
            } else if (format === 'json') {
                fileContent = JSON.stringify(data, null, 2);
                fileExtension = 'json';
                mimeType = 'application/json';
            } else {
                throw new Error('ÙØ±Ù…Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø±');
            }

            // BOM Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ØµØ­ÛŒØ­ ÙØ§Ø±Ø³ÛŒ Ø¯Ø± Excel
            if (format === 'csv') {
                const BOM = '\uFEFF';
                fileContent = BOM + fileContent;
            }

            createDownloadLink(fileContent, `${filename}.${fileExtension}`, mimeType);
            
            await alert(`ÙØ§ÛŒÙ„ ${filename}.${fileExtension} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯`);
            
        } catch (error) {
            console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± ØªÙˆÙ„ÛŒØ¯ ÙØ§ÛŒÙ„:', error);
            await alert('Ø®Ø·Ø§ Ø¯Ø± ØªÙˆÙ„ÛŒØ¯ ÙØ§ÛŒÙ„ Ø¯Ø§Ù†Ù„ÙˆØ¯ÛŒ');
        }
    }

    function convertToCSV(data) {
        if (!data.length) return '';
        
        const headers = Object.keys(data[0]);
        const csvRows = [headers.join(',')];
        
        for (const row of data) {
            const values = headers.map(header => {
                let value = row[header];
                
                if (value === null || value === undefined) return '';
                
                if (typeof value === 'string') {
                    value = value.replace(/\n/g, ' ').replace(/\r/g, ' ');
                    value = `"${value.replace(/"/g, '""')}"`;
                }
                
                return value;
            });
            csvRows.push(values.join(','));
        }
        
        return csvRows.join('\n');
    }

    function createDownloadLink(data, filename, mimeType) {
        const blob = new Blob([data], { type: mimeType });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = filename;
        link.style.display = 'none';
        document.body.appendChild(link);
        link.click();
        
        setTimeout(() => {
            if (link.parentElement) {
                document.body.removeChild(link);
            }
            URL.revokeObjectURL(url);
        }, 100);
    }

    async function downloadAllData() {
        showDownloadOptions('all');
    }

    async function downloadFilteredData() {
        showDownloadOptions('filtered');
    }

    async function downloadSingleReport(reportId) {
        showDownloadOptions('single', reportId);
    }

    // ==================== Ù…Ø¯ÛŒØ±ÛŒØª Ø¢ÙÙ„Ø§ÛŒÙ† ====================
    window.addEventListener('online', function() {
        const offlineAlert = document.getElementById('offlineAlert');
        if (offlineAlert) offlineAlert.style.display = 'none';
        console.log('ğŸŒ Ø§ØªØµØ§Ù„ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø¨Ø±Ù‚Ø±Ø§Ø± Ø´Ø¯');
        loadManagerReports();
    });

    window.addEventListener('offline', function() {
        const offlineAlert = document.getElementById('offlineAlert');
        if (offlineAlert) offlineAlert.style.display = 'block';
        console.log('ğŸ“´ Ø§ØªØµØ§Ù„ Ø§ÛŒÙ†ØªØ±Ù†Øª Ù‚Ø·Ø¹ Ø´Ø¯');
    });

    if (!navigator.onLine) {
        const offlineAlert = document.getElementById('offlineAlert');
        if (offlineAlert) offlineAlert.style.display = 'block';
    }

    // ==================== Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ====================
    console.log('ğŸš€ Ø´Ø±ÙˆØ¹ Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡...');
    
    // Ø§ØªØµØ§Ù„ Ø¨Ù‡ Supabase Ùˆ Ù„ÙˆØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
    loadManagerReports();
    
    // Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ ÙÛŒÙ„ØªØ±
    const searchInput = document.getElementById('searchInput');
    const statusFilter = document.getElementById('statusFilter');
    const priorityFilter = document.getElementById('priorityFilter');
    
    if (searchInput) {
        searchInput.addEventListener('input', filterReports);
    }
    if (statusFilter) {
        statusFilter.addEventListener('change', filterReports);
    }
    if (priorityFilter) {
        priorityFilter.addEventListener('change', filterReports);
    }
    
    // Ù†ÙˆÛŒÚ¯ÛŒØ´Ù†
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
        link.addEventListener('click', function() {
            navLinks.forEach(l => l.classList.remove('active'));
            this.classList.add('active');
        });
    });

    // Ù…Ø­Ø§ÙØ¸Øª Ø§Ø² ØµÙØ­Ù‡
    if (typeof auth !== 'undefined') {
        if (auth.protectPageByRole('manager')) {
            if (userNameElement) {
                userNameElement.textContent = auth.getUsername() || 'Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…';
            }
            if (userAvatarElement) {
                userAvatarElement.textContent = auth.getUsername() ? auth.getUsername().charAt(0) : 'M';
            }
        }
    } else {
        console.log('ğŸ‘¨â€ğŸ’» Ø­Ø§Ù„Øª ØªÙˆØ³Ø¹Ù‡ ÙØ¹Ø§Ù„');
        if (userNameElement) {
            userNameElement.textContent = 'Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ… ';
        }
        if (userAvatarElement) {
            userAvatarElement.textContent = 'M';
        }
    }

    // ==================== Ø§ØªØµØ§Ù„ ØªÙˆØ§Ø¨Ø¹ Ø¨Ù‡ window ====================
    console.log('ğŸ”— Ø§ØªØµØ§Ù„ ØªÙˆØ§Ø¨Ø¹ Ø¨Ù‡ window...');
    
    window.closeCustomAlert = window.closeCustomAlert;
    window.formatPersianDateTime = formatPersianDateTime;
    window.getTimeSinceLogin = getTimeSinceLogin;
    window.updateOnlineTime = updateOnlineTime;
    window.loadManagerReports = loadManagerReports;
    window.updateStats = updateStats;
    window.updatePerformanceMetrics = updatePerformanceMetrics;
    window.renderReports = renderReports;
    window.filterReports = filterReports;
    window.checkCleanupAlert = checkCleanupAlert;
    window.dismissAlert = dismissAlert;
    window.showDownloadOptions = showDownloadOptions;
    window.downloadSelectedFormat = downloadSelectedFormat;
    window.convertToPersianFormat = convertToPersianFormat;
    window.getDecisionText = getDecisionText;
    window.downloadData = downloadData;
    window.convertToCSV = convertToCSV;
    window.createDownloadLink = createDownloadLink;
    window.downloadAllData = downloadAllData;
    window.downloadFilteredData = downloadFilteredData;
    window.downloadSingleReport = downloadSingleReport;
    window.closeDownloadModal = closeDownloadModal;
    window.getStatusText = getStatusText;
    window.getPriorityText = getPriorityText;
    window.getPriorityColor = getPriorityColor;
    
    console.log('âœ… Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ú©Ø§Ù…Ù„ Ø´Ø¯');
});

// Service Worker
if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
        navigator.serviceWorker.register('../sw.js');
    });
}
    </script>
</body>
</html>
